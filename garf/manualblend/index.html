<head>
  <style>
    .panel {
      width: 300px;
      height: 300px;
      background-size: contain;
      background-repeat: no-repeat;
    }

    .strip {
      display: flex;
    }
  </style>
</head>

<body id="body">
  <div class="strip">
    <div class="panel" id="panel1">
    </div>
    <div class="panel" id="panel2">
    </div>
    <div class="panel" id="panel3"></div>
  </div>
  <script>
    randomStrip = function () {
      do {
        var date = new Date(+Date.parse("1978-06-19") + Math.random() * (Date.now() - Date.parse("1978-06-19")));
      } while (date.getDay() == 0);
      var datestring = date.getFullYear().toString().slice(2) + ("0" + (date.getMonth() + 1)).slice(-2) + ("0" + date.getDate()).slice(-2);
      return datestring;
    }
    getDate = function () {
      urlParams = new URLSearchParams(window.location.search);
      date = urlParams.get('d');
      return date;
    }
    getSpecial = function (n){
      urlParams = new URLSearchParams(window.location.search);
      p = urlParams.get(`p${n}`);
      return p;
    }
    getStripUrl = function (d, n) {
      special = getSpecial(n);
      if (special == null) return `https://www.bgreco.net/garfield/panel.gif?urldate=${d}&frame=${n}`;
      if (special == 'blender') return 'https://www.bgreco.net/garfield/panel.gif?urldate=080426&frame=0';
      return `https://www.bgreco.net/garfield/panel.gif?urldate=${special}&frame=${n}`;
    }
    window.onload = function () {
      randomUrl1 = `https://www.bgreco.net/garfield/panel.gif?urldate=${randomStrip()}&frame=0`;
      randomUrl2 = `https://www.bgreco.net/garfield/panel.gif?urldate=${randomStrip()}&frame=1`;
      randomUrl3 = `https://www.bgreco.net/garfield/panel.gif?urldate=${randomStrip()}&frame=2`;
      document.getElementById("panel1").style = `background-image: url(${getStripUrl(getDate(),0)})`;
      document.getElementById("panel2").style = `background-image: url(${getStripUrl(getDate(),1)})`;
      document.getElementById("panel3").style = `background-image: url(${getStripUrl(getDate(),2)})`;
    }
  </script>
</body>
